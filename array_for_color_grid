#include <esp8266channel3lib.h>

int n_lines = 10;

uint8_t color_array[] = {
  C3_COL_RED,
  C3_COL_LIGHT_PINK,
  C3_COL_LIGHT_YELLOW,
  C3_COL_GREEN_2,
  C3_COL_GREEN_1,
  C3_COL_TURQUOISE,
  C3_COL_BABYBLUE_1,
  C3_COL_BABYBLUE_2,
  C3_COL_LIGHT_BLUE,
  C3_COL_DARK_BLUE};

int color_offset = 0;


// This callback gets called automatically every frame
void ICACHE_FLASH_ATTR loadFrame() {
   // video_broadcast_clear_frame();
    
int color_index = color_offset;
  
  CNFGColor(color_array[color_index++ % n_lines]);
  CNFGTackRectangle( 4, 0, 9, 195 );
  CNFGColor(color_array[color_index++ % n_lines]);
  CNFGTackRectangle( 27, 0, 32, 195 );
  CNFGColor(color_array[color_index++ % n_lines]);
  CNFGTackRectangle( 50, 0, 55, 195 );
  CNFGColor(color_array[color_index++ % n_lines]);
  CNFGTackRectangle( 73, 0, 78, 195 );  
  CNFGColor(color_array[color_index++ % n_lines]);
  CNFGTackRectangle( 96, 0, 101, 195 );
  CNFGColor(color_array[color_index++ % n_lines]);
  CNFGTackRectangle( 119, 0, 124, 195 );  
  CNFGColor(color_array[color_index++ % n_lines]);
  CNFGTackRectangle( 142, 0, 147, 195 );
  CNFGColor(color_array[color_index++ % n_lines]);
  CNFGTackRectangle( 165, 0, 170, 195 );
  CNFGColor(color_array[color_index++ % n_lines]);
  CNFGTackRectangle( 188, 0, 193, 195 );
  CNFGColor(color_array[color_index++ % n_lines]);
  CNFGTackRectangle( 211, 0, 216, 195 );
  
  color_offset++;

    //horizontals
    CNFGColor( color_array[color_index++ % n_lines] );
    CNFGTackRectangle( 0, 10, 216, 15 );
    CNFGColor( color_array[color_index++ % n_lines] );
    CNFGTackRectangle( 0, 30, 216, 35 );
    CNFGColor( color_array[color_index++ % n_lines] );
    CNFGTackRectangle( 0, 50, 216, 55 );
    CNFGColor( color_array[color_index++ % n_lines] );
    CNFGTackRectangle( 0, 70, 216, 75 );  
    CNFGColor( color_array[color_index++ % n_lines] );
    CNFGTackRectangle( 0, 90, 216, 95 );
    CNFGColor(  color_array[color_index++ % n_lines] );
    CNFGTackRectangle( 0, 110, 216, 115 );  
    CNFGColor( color_array[color_index++ % n_lines] );
    CNFGTackRectangle( 0, 130, 216, 135 );
    CNFGColor( color_array[color_index++ % n_lines] );
    CNFGTackRectangle( 0, 150, 216, 155 );
    CNFGColor( color_array[color_index++ % n_lines] );
    CNFGTackRectangle( 0, 170, 216, 175 );
    CNFGColor( color_array[color_index++ % n_lines] );
    CNFGTackRectangle( 0, 190, 216, 195 );

}

void setup() {
  system_update_cpu_freq( SYS_CPU_160MHZ );
  channel3Init(NTSC, &loadFrame);
}

void loop() {

}
